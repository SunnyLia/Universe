<!DOCTYPE html>
<html>

<head>
    <title>DOCUMENT</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link type="text/css" rel="stylesheet" href="../../build/main.css">
</head>

<body>
    <script src="../../build/three.js"></script>
    <script type="module">
        import { GUI } from '../../jsm/libs/dat.gui.module.js';
        import { OrbitControls } from '../../jsm/controls/OrbitControls.js';
        import { TeapotBufferGeometry } from '../../jsm/geometries/TeapotBufferGeometry.js';
        var options = {
            newShading: "glossy"
        };
        // 通过摄像机渲染场景，三要素：场景、相机和渲染器。
        /**
         * 创建场景对象Scene
         */
        var scene = new THREE.Scene();

        /**
         * 相机设置
         */
        var width = window.innerWidth; //窗口宽度
        var height = window.innerHeight; //窗口高度
        //创建相机对象
        var camera = new THREE.PerspectiveCamera(60, width / height, 1, 10000);

        camera.position.set(200, 300, 200); //设置相机位置
        // camera.lookAt(scene.position); //设置相机方向(指向的场景对象)
        /**
         * 光源设置
         */
        //点光源
        var point = new THREE.PointLight(0xffffff);
        scene.add(point); //点光源添加到场景中
        //环境光
        var ambient = new THREE.AmbientLight(0x444444);
        scene.add(ambient);
        // console.log(scene)
        /**
         * 创建网格模型
         */
        var textureMap = new THREE.TextureLoader().load('../../textures/uv_grid_opengl.jpg');
        textureMap.wrapS = textureMap.wrapT = THREE.RepeatWrapping;
        textureMap.anisotropy = 16;
        textureMap.encoding = THREE.sRGBEncoding; //贴图编码格式

        var path = "../../textures/cube/pisa/";
        var urls = [
            path + "px.png", path + "nx.png",
            path + "py.png", path + "ny.png",
            path + "pz.png", path + "nz.png"
        ];

        var textureCube = new THREE.CubeTextureLoader().load(urls);
        textureCube.encoding = THREE.sRGBEncoding;

        var materialColor = new THREE.Color();
        materialColor.setRGB(1.0, 1.0, 1.0);
        var materialList = {
            wireframe: new THREE.MeshBasicMaterial({ color: 0xFFFFFF, wireframe: true }),
            flat: new THREE.MeshPhongMaterial({ color: materialColor, specular: 0x000000, flatShading: true, side: THREE.DoubleSide }),
            smooth: new THREE.MeshLambertMaterial({ color: materialColor, side: THREE.DoubleSide }),
            glossy: new THREE.MeshPhongMaterial({ color: materialColor, side: THREE.DoubleSide }),
            textured: new THREE.MeshPhongMaterial({ color: materialColor, map: textureMap, side: THREE.DoubleSide }),
            reflective: new THREE.MeshPhongMaterial({ color: materialColor, envMap: textureCube, side: THREE.DoubleSide })
        }
        /**
         * 创建渲染器对象
         */
        var renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(width, height);//设置渲染区域尺寸
        renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色
        document.body.appendChild(renderer.domElement); //body元素中插入canvas对象
        //执行渲染操作   指定场景、相机作为参数
        renderer.render(scene, camera);

        var cameraControls = new OrbitControls(camera, renderer.domElement);

        var gui = new GUI();
        gui.add(options, "newShading", ["wireframe", "flat", "smooth", "glossy", "textured", "reflective"]).name("Shading").onChange(addMash);

        function addMash() {
            console.log(options.newShading);
            // var geometry = new THREE.BoxGeometry(100, 100, 100); //创建一个立方体几何对象Geometry
            // var material = new THREE.MeshLambertMaterial({
            //     color: 0x0000ff
            // }); //材质对象Material
            // var mesh = new THREE.Mesh(geometry, material); //网格模型对象Mesh
            // scene.add(mesh); //网格模型添加到场景中
        }
    </script>
</body>

</html>